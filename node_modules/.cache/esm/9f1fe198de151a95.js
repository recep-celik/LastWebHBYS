_de1‍.w("jquery-toast-plugin/dist/jquery.toast.min");// const cookieParser = require('cookie-parser');
const { JSDOM } = require("jsdom");
const { window } = new JSDOM("");
// const $ = require("jquery")(window);

var $ = require('jquery');

window.jQuery = window.$ = $;


var path = require('path'),
    users = require('../models/users'),
    fs = require('fs');

module.exports.adminControllerGet = function (req, res) {
    res.render('adminModule');
    // res.sendFile(path.join(__dirname, '../../public/htmls', 'administration.html'));
}


module.exports.newUserRegControllerPost = function (req, res) {
    _de1‍.g.console.log(req.body);

    var newUser = new users({
        userId: req.body.userId,
        userName: req.body.userNickname,
        password: req.body.userPassword,
        name: req.body.userName,
        surname: req.body.userSurname,
        personalIdNumber: req.body.userTc,
        majorDicipline: req.body.userMajorDicipline,
        userGroup: req.body.userGroup
    })

    newUser.save(function (err) {
        if (err) {
            _de1‍.g.console.log('Couldnt save new user..:' + err);
        } else {
            $.toast({
                heading: 'Success',
                text: 'Success',
                showHideTransition: 'slide',
                icon: 'success',
                loaderBg: '#19c520',
                position: 'top-right'
            });
            // res.render('../views/adminModule', { success: 'basarili' });
            _de1‍.g.console.log('New user saved..' + newUser);
        }
    }
    )

    res.status(204).send();
    res.render('adminModule');

}